(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getBooks",function(){return E}),a.d(n,"filter",function(){return y}),a.d(n,"getCartFromStorage",function(){return O});var r={};a.r(r),a.d(r,"addItem",function(){return N}),a.d(r,"subItem",function(){return I}),a.d(r,"clearCart",function(){return S});var o=a(0),c=a.n(o),i=a(13),l=a.n(i),s=a(14),u=a(15),m=a(17),d=a(16),b=a(18),p=a(8),h=a(11),f=a(42),g=a(70),v=a.n(g),k={GET_ITEMS:"".concat("http://localhost:9000","/api/books")},E=function(){return function(e){v.a.get(k.GET_ITEMS).then(function(t){var a=t.data;window.localStorage.setItem("books",JSON.stringify(a));var n=[];e({type:"getBooks",payload:a}),a.forEach(function(e){e.categories&&(n=new Set([].concat(Object(f.a)(n),Object(f.a)(e.categories))),n=Object(f.a)(n))}),window.localStorage.setItem("categories",JSON.stringify(n)),e({type:"getCategories",payload:n})})}},y=function(e){return{type:"filterBooks",payload:e}},O=function(){var e={itemCount:0,cart:[]},t=window.localStorage.getItem("booksCart");return t&&(e=JSON.parse(t)),{type:"getCartFromStorage",payload:e}},j=a(41),w=a.n(j),C=a(19),N=function(e){return function(t){t({type:"addItem",payload:e})}},I=function(e){return function(t){t({type:"subItem",payload:e})}},S=function(){return{type:"clearCart",payload:{itemCount:0,cart:[]}}},D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"showDetail",value:function(){window.localStorage.setItem("bookDetail",JSON.stringify(this.props.data))}},{key:"addItem",value:function(e){this.props.actions.addItem(e)}},{key:"render",value:function(){var e=this.props.data,t=e.isbn,a=e.title,n=e.thumbnailUrl,r=e.categories,o=e.authors,i=e.shortDescription,l=o.join(", ").replace(", , ",", ");return c.a.createElement("div",{className:"book-item card"},c.a.createElement(C.b,{to:"/detail/".concat(t),onClick:this.showDetail.bind(this)},c.a.createElement("div",{className:"text-center img-holder"},c.a.createElement("img",{src:n,alt:a,className:"img-thumbnail"})),c.a.createElement("p",{className:"font-weight-bolder d-inline-block text-truncate book-title"},a)),c.a.createElement("p",{className:"font-italic d-inline-block text-truncate book-authors"},l),c.a.createElement("div",{className:"categories"},r.map(function(e,t){return c.a.createElement("span",{className:"category",key:"category".concat(t)},e," ",t===r.length-1?null:" | ")})),c.a.createElement("p",{className:"short-desc"},i),c.a.createElement(C.b,{to:"/detail/".concat(t),onClick:this.showDetail.bind(this)},"Detail"),c.a.createElement("button",{className:"btn btn-info add-item",onClick:this.addItem.bind(this,this.props.data)},"Add Item"))}}]),t}(c.a.Component);var R=Object(h.b)(function(e){return{}},function(e){return{actions:Object(p.b)(r,e)}})(D),B=a(154),x=a(155),M=a(156),A=(a(126),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={list:[],pageNow:0,lastRenderBooks:[],showAddMore:!0,filterbooks:[]},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=w.a.parse(this.props.location.search).category;this.getFilterBooks(e,this.props.books,0)}},{key:"componentWillReceiveProps",value:function(e){var t=w.a.parse(e.location.search).category,a=w.a.parse(this.props.location.search).category;e.books.length===this.props.books.length&&t===a||this.getFilterBooks(t,e.books,0)}},{key:"addMore",value:function(){var e=this.state,t=e.pageNow,a=e.lastRenderBooks,n=e.filterbooks;t+=12;var r=n.slice(t,t+12);a=this.state.lastRenderBooks.concat(r);var o=n.length>a.length;this.setState({lastRenderBooks:a,pageNow:t,showAddMore:o})}},{key:"getFilterBooks",value:function(e,t,a){e&&(t=t.filter(function(t){return t.categories.indexOf(e)>=0})),this.lazyLoad(t,a)}},{key:"lazyLoad",value:function(e,t){var a;e.length>12?a=e.slice(t,t+12):a=e;var n=e.length>a.length;this.setState({lastRenderBooks:a,pageNow:t,showAddMore:n,filterbooks:e})}},{key:"render",value:function(){var e=this.state,t=e.lastRenderBooks,a=e.showAddMore;return t.length>0?c.a.createElement("div",{className:"home"},c.a.createElement(B.a,null,c.a.createElement(x.a,null,t.map(function(e,t){return c.a.createElement(M.a,{xs:12,sm:6,md:4,lg:3,key:"item".concat(t)},c.a.createElement(R,{data:e}))}))),a?c.a.createElement("div",{className:"text-center add-more"},c.a.createElement("p",{onClick:this.addMore.bind(this)},"Add More")):null):c.a.createElement("div",{className:"error text-center"},"Opps... Server error")}}]),t}(c.a.Component));var F=Object(h.b)(function(e){return{filterBooks:e.filterReducer.filterBooks,books:e.homeReducer.books}},function(e){return{actions:Object(p.b)(n,e)}})(A),J=a(72),T=(a(128),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={detail:{}},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"setDetailFromLocalStorage",value:function(){var e=window.localStorage.getItem("bookDetail"),t={};e&&(t=JSON.parse(e)),this.setState({detail:t})}},{key:"componentWillUnmount",value:function(){window.localStorage.removeItem("bookDetail")}},{key:"componentDidMount",value:function(){if(window.localStorage.getItem("bookDetail"))this.setDetailFromLocalStorage();else{var e=this.props.match.params.isbn,t=this.props.books.filter(function(t){return t.isbn==e})[0]||{};this.setState({detail:t})}}},{key:"componentWillReceiveProps",value:function(e){if(!window.localStorage.getItem("bookDetail")){var t=e.match.params.isbn;console.log(t);var a=e.books.filter(function(e){return e.isbn==t})[0]||{};this.setState({detail:a})}}},{key:"addItem",value:function(e){this.props.actions.addItem(e)}},{key:"render",value:function(){var e=this.state.detail,t=e.title,a=e.thumbnailUrl,n=e.isbn,r=e.pageCount,c=e.publishedDate,i=e.longDescription,l=e.authors||[],s=e.categories||[],u=(c?c.$date:null)?J(c.$date).format("YYYY-MM-DD"):"N/A",m=l.join(", ").replace(", , ",", "),d=s.join(", ").replace(", , ",", ");return o.createElement("div",{className:"detail"},o.createElement(B.a,null,o.createElement(x.a,null,o.createElement(M.a,{md:3},o.createElement("div",{className:"img-holder"},o.createElement("img",{src:a,alt:t}))),o.createElement(M.a,{md:9},o.createElement("h3",null,t),o.createElement("p",null,o.createElement("b",null,"By: "),m),o.createElement("p",null,o.createElement("b",null,"Categories: "),d),o.createElement("button",{onClick:this.addItem.bind(this,e),className:"btn btn-info"},"Add Item"),o.createElement("div",{className:"desc"},o.createElement("p",null,o.createElement("b",null,"Synopsis: ")),o.createElement("p",null,i)))),o.createElement(x.a,null,o.createElement(M.a,null,o.createElement("div",{className:"book-details"},o.createElement("p",null,"Book Details"),o.createElement("p",null,"Publish Date: ",u),o.createElement("p",null,"Page Count: ",r),o.createElement("p",null,"ISBN: ",n))))))}}]),t}(o.Component));var U=Object(h.b)(function(e){return{books:e.homeReducer.books}},function(e){return{actions:Object(p.b)(r,e)}})(T),W=a(160),Y=a(157),L=(a(129),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"addItemCart",value:function(e){this.props.actions.addItem(e)}},{key:"subItemCart",value:function(e){this.props.actions.subItem(e)}},{key:"showItemDetail",value:function(e){window.localStorage.setItem("bookDetail",JSON.stringify(e))}},{key:"clearCart",value:function(){window.localStorage.removeItem("booksCart"),this.props.actions.clearCart()}},{key:"saveCartToSorage",value:function(){this.props.cartReducer&&window.localStorage.setItem("booksCart",JSON.stringify(this.props.cartReducer))}},{key:"render",value:function(){var e=this,t=this.props.cartReducer,a=t.cart,n=t.itemCount;return o.createElement("div",{className:"cart"},n>0?o.createElement("div",null,o.createElement(W.a,{variant:"flush",className:"cart-list"},a.map(function(t,a){return o.createElement(W.a.Item,{key:"cartItem".concat(a),className:"cart-list-item"},o.createElement(B.a,null,o.createElement(x.a,null,o.createElement(M.a,{xs:2,md:{span:2,offset:4}},o.createElement(C.b,{to:"/detail/".concat(t.isbn),onClick:e.showItemDetail.bind(e,t)},o.createElement(Y.a,{src:t.thumbnailUrl,alt:t.title,thumbnail:!0}))),o.createElement(M.a,{xs:8,md:4},o.createElement(C.b,{to:"/detail/".concat(t.isbn),onClick:e.showItemDetail.bind(e,t),className:"title"},t.title)),o.createElement(M.a,{xs:2,md:2},o.createElement("p",{className:"cart-control"},o.createElement("span",{className:"rounded-circle",onClick:e.subItemCart.bind(e,t)},"-"),o.createElement("span",null,t.count),o.createElement("span",{className:"rounded-circle",onClick:e.addItemCart.bind(e,t)},"+"))))))})),o.createElement("div",{className:"text-right cart-save"},o.createElement("button",{className:"btn btn-info",onClick:this.saveCartToSorage.bind(this)},"Save Items"),o.createElement("button",{className:"btn btn-secondary",onClick:this.clearCart.bind(this)},"Remove Items"))):o.createElement("div",{className:"no-items text-center"},o.createElement("h4",null,"Your Shopping Cart is empty"),o.createElement("p",null,"There are currently no items in your Shopping Cart.")))}}]),t}(o.Component));var P=Object(h.b)(function(e){return{cartReducer:e.cartReducer}},function(e){return{actions:Object(p.b)(r,e)}})(L),z=(a(131),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={activeId:-1},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"filter",value:function(e,t){this.setState({activeId:t}),this.props.actions.filter(e)}},{key:"render",value:function(){var e=this,t=this.props.categories,a=this.state.activeId;return o.createElement("div",{className:"categories-holder"},t.map(function(t,n){return t?o.createElement("span",{key:"category".concat(n)},o.createElement(C.b,{to:{pathname:"/home",search:"?category=".concat(encodeURI(t))},className:"badge badge-pill badge-info".concat(a===n?" active":null),onClick:e.filter.bind(e,t,n)},t)):null}))}}]),t}(o.Component));var $=Object(h.b)(function(e){return{categories:e.categoriesReducer.categories}},function(e){return{actions:Object(p.b)(n,e)}})(z),G=a(74),_=a.n(G),q=a(29),H=a(75),K=a.n(H),Q=a(76),V=a.n(Q),X=(a(132),a(158)),Z=a(78),ee=a(159),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.actions.getBooks(),this.props.actions.getCartFromStorage()}},{key:"barSelect",value:function(e){this.setState({opened:e})}},{key:"render",value:function(){var e=this.props.itemCount,t=this.state.opened;return c.a.createElement("div",{className:"base"},c.a.createElement(C.a,null,c.a.createElement("header",{className:"App-header"},c.a.createElement(X.a,{className:"lightblue",expand:"all",fixed:"top",onToggle:this.barSelect.bind(this)},c.a.createElement(Z.a,{as:"div",className:"btn-home"},c.a.createElement(C.b,{to:"/"},c.a.createElement("img",{src:_.a,alt:"home",width:"40",height:"40"}))),c.a.createElement(ee.a,{title:"Categories",className:"categories-nav"},c.a.createElement(ee.a.Item,{as:$,size:"lg"})),c.a.createElement(X.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"cart-holder"},c.a.createElement("div",{className:"cart-lable"},c.a.createElement("img",{src:t?V.a:K.a,alt:"",width:"40",height:"40"}),e>0?c.a.createElement("sup",{className:"rounded-circle"},e):null)),c.a.createElement(X.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(P,null)))),c.a.createElement(q.a,{path:"/",exact:!0,component:F}),c.a.createElement(q.a,{path:"/home",component:F}),c.a.createElement(q.a,{path:"/detail/:isbn",render:function(e){return c.a.createElement(U,e)}})))}}]),t}(c.a.Component);var ae=Object(h.b)(function(e){return{itemCount:e.cartReducer.itemCount}},function(e){return{actions:Object(p.b)(n,e)}})(te),ne=a(84);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(150),a(151);var re=Object(ne.a)();l.a.render(c.a.createElement(h.a,{store:re},c.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,a){e.exports=a.p+"static/media/home.0eaf1901.svg"},75:function(e,t,a){e.exports=a.p+"static/media/cart.ecc4b73f.svg"},76:function(e,t,a){e.exports=a.p+"static/media/cart-open.7b74607f.svg"},84:function(e,t,a){"use strict";(function(e){var n=a(8),r=a(85),o=a(86);t.a=function(e){var t=[r.a],a=[n.a.apply(void 0,t)],c=n.d.apply(void 0,a),i=Object(n.e)(o.a,e,c);return i}}).call(this,a(54)(e))},86:function(e,t,a){"use strict";var n=a(8),r={books:[]},o={categories:[]},c={filter:""},i={cart:[],itemCount:0},l=Object(n.c)({homeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getBooks":var a={books:t.payload};return Object.assign({},r,a);default:return e}},categoriesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getCategories":var a={categories:t.payload};return Object.assign({},e,a);default:return e}},filterReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"filterBooks":return Object.assign({},e,{filter:t.payload});default:return e}},cartReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,a=e.cart,n=e.itemCount;switch(t.type){case"addItem":n++;var r=!1;return a=a.map(function(e,a){return e.isbn===t.payload.isbn&&(e.count++,r=!0),e}),r||(t.payload.count=1,a.push(t.payload)),Object.assign({},e,{cart:a,itemCount:n});case"subItem":n--;var o=-1;return a=a.map(function(e,a){return e.isbn===t.payload.isbn&&(e.count>1?e.count--:o=a),e}),o>=0&&a.splice(o,1),Object.assign({},e,{cart:a,itemCount:n});case"getCartFromStorage":case"clearCart":return Object.assign({},e,t.payload);default:return e}}});t.a=l},87:function(e,t,a){e.exports=a(152)}},[[87,1,2]]]);
//# sourceMappingURL=main.2b8dc107.chunk.js.map